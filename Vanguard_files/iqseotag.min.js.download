var VNG_CONFIG={SEO_INSIGHT_MODE:"CONTAINER_TAG",SEARCH_ENGINES:{GOOGLE:{NAME:"Google",QUERY_PARAM:"q",HOST:"google"},YAHOO:{NAME:"Yahoo",QUERY_PARAM:"p",HOST:"yahoo"},BING:{NAME:"Bing",QUERY_PARAM:"q",HOST:"bing"},ASK:{NAME:"Ask",QUERY_PARAM:"q",HOST:"ask"}}};
function trackRequest(c,e,d,b){var a=checkReferrer(c,e,d);
a=checkAffiliates(c,b,a);
a=checkSocial(c,b,a);
a.randomId=Math.floor(Math.random()*100001);
a.timestamp=new Date().getTime();
return a
}function checkAffiliates(d,b,a){if(b!=null){var c=b.AFFILIATES;
if(c!=null){for(i=0;
i<c.length;
i++){var e=c[i];
if(d.toLowerCase().indexOf(e.toLowerCase())!=-1){a.source=e;
a.modeOfAccess="AFFILIATE"
}}}}return a
}function checkSocial(c,b,a){if(b!=null){var e=b.SOCIAL;
if(e!=null){for(i=0;
i<e.length;
i++){var d=e[i];
if(c.toLowerCase().indexOf(d.toLowerCase())!=-1){a.source=d;
a.modeOfAccess="SOCIAL"
}}}}return a
}function checkReferrer(e,h,g){var a=new Object();
var b=parseUri(h);
a.current_page_params=b[parseUri.options.q.name];
a.modeOfAccess="UNKNOWN";
a.source="NONE";
a.isSearchEngine=false;
if(!e||(e==null)||(e=="")||(whitespacetrim(e)=="")){a.isRequestTracked=false;
a.isSearchEngine=false;
a.modeOfAccess="DIRECT"
}else{a.isRequestTracked="UNKNOWN";
var f=VNG_CONFIG.SEARCH_ENGINES;
for(var d in f){var c=f[d];
if(e.indexOf(c.HOST)!=-1){a.source=c.NAME;
a.isSearchEngine=true;
a.modeOfAccess="ORGANIC";
a.query=getQuery(e,c);
a.isRequestTracked=isRequestTracked(h,g);
if(a.isRequestTracked){a.modeOfAccess="PAID"
}break
}}if(!a.isSearchEngine){a.source=encodeURI(e);
a.isSearchEngine=false;
a.isRequestTracked=isRequestTracked(h,g);
if(a.isRequestTracked){a.modeOfAccess="DISPLAY"
}else{a.modeOfAccess="UNKNOWN"
}}}return a
}function isRequestTracked(b,a){return a!=null&&(b.indexOf("?"+a+"=")!=-1||b.indexOf("&"+a+"=")!=-1)
}function getQuery(b,a){var c=parseUri(b);
var d=c[parseUri.options.q.name][a.QUERY_PARAM];
return encodeURI(d)
}function whitespacetrim(a){return a.replace(/^\s+|\s+$/g,"")
}function parseUri(e){var d=parseUri.options,a=d.parser[d.strictMode?"strict":"loose"].exec(e),c={},b=14;
while(b--){c[d.key[b]]=a[b]||""
}c[d.q.name]={};
c[d.key[12]].replace(d.q.parser,function(g,f,h){if(f){c[d.q.name][f]=h
}});
return c
}parseUri.options={strictMode:true,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};